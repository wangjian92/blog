(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{307:function(s,a,e){"use strict";e.r(a);var t=e(0),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("这篇文章源于自己近来使用 vultr 折腾 ShadowSocks 而做的记录\n"),e("strong",[s._v("科学上网，请合法参考、使用本文")])]),s._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/wangjian92",target:"_blank",rel:"noopener noreferrer"}},[s._v("本文地址-GitHub"),e("OutboundLink")],1)]),s._v(" "),e("li",[e("a",{attrs:{href:"https://www.jianshu.com/p/216885c33ed8",target:"_blank",rel:"noopener noreferrer"}},[s._v("本文地址-简书"),e("OutboundLink")],1)])]),s._v(" "),e("h2",{attrs:{id:"prepare"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prepare"}},[s._v("#")]),s._v(" PREPARE")]),s._v(" "),e("p",[s._v("大体流程是需要在 vultr 官网上使用邮箱注册登录，购买并设置服务器，在服务器上安装并搭建 shadowsocks，本地安装 shadowsocks 客户端，按照服务器上设置的端口密码与服务器建立连接，完成。")]),s._v(" "),e("h3",{attrs:{id:"实现原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实现原理"}},[s._v("#")]),s._v(" 实现原理")]),s._v(" "),e("blockquote",[e("p",[s._v("下面摘自 wikipedia\nShadowsocks 的运行原理与其他代理工具基本相同，使用特定的中转服务器完成数据传输。\n在服务器端部署完成后，用户需要按照指定的密码、加密方式和端口，使用客户端软件与其连接。在成功连接到服务器后，客户端会在本机上构建一个本地 Socks5 代理（或 VPN、透明代理）。浏览网络时，网络流量会被分到本地 Socks5 代理，客户端将其加密之后发送到服务器，服务器以同样的加密方式将流量回传给客户端，以此实现代理上网。")])]),s._v(" "),e("h3",{attrs:{id:"提前准备好这些"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#提前准备好这些"}},[s._v("#")]),s._v(" 提前准备好这些")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/shadowsocks/shadowsocks-windows/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("ShadowSocks"),e("OutboundLink")],1),s._v("——我选用的是比较老的 2.5.8 版本\n"),e("a",{attrs:{href:"https://xshell.en.softonic.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("xshell"),e("OutboundLink")],1),s._v("——用于操作远程服务\n还有购买 vultr 服务需要准备至少$10...土豪请忽略这行")]),s._v(" "),e("h2",{attrs:{id:"begin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#begin"}},[s._v("#")]),s._v(" BEGIN")]),s._v(" "),e("h3",{attrs:{id:"一、充值-vultr-服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、充值-vultr-服务"}},[s._v("#")]),s._v(" 一、充值 VULTR 服务")]),s._v(" "),e("p",[s._v("VULTR 官方地址："),e("a",{attrs:{href:"https://www.vultr.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.vultr.com/"),e("OutboundLink")],1),s._v(" "),e("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/6177162-6176ab5c45ecfe40.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"VULTR首页"}}),s._v("\n需要输入邮箱及密码进行注册，登录之后进入下图，点击左侧 "),e("strong",[s._v("Billing")]),s._v(" 后，选择支付方式，编者使用的是 Alipay 支付宝，选好后会显示出二维码，用支付宝扫描后扣款，支付宝会计算费率。这里最少需要购买$10，扣款规则是会根据之后选择的服务器类型进行扣款，10 刀如果选便宜的类型的话够用 2~3 个月。\n"),e("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/6177162-2b634a90b57a21c0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"付款页面"}}),s._v("\n顺利完成上面的步骤就充值成功了，再次回到 "),e("strong",[s._v("Billing")]),s._v(" 页面会在右上角看到余额。")]),s._v(" "),e("h3",{attrs:{id:"二、配置-vultr-服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、配置-vultr-服务"}},[s._v("#")]),s._v(" 二、配置 VULTR 服务")]),s._v(" "),e("p",[s._v("完成步骤一后，就可以在 "),e("strong",[s._v("Servers")]),s._v(" 中实例服务了，进入"),e("strong",[s._v("Servers")]),s._v("，点击右上角的加号新建，进入下图页面：\n"),e("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/6177162-7067d3545d2d67e3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"Servers实例服务页面"}}),s._v("\n在这里选择自己想要的配置，编者这里选择的地址是洛杉矶节点，类型是 CentOS 7 x64，因为我只搭建 ShadowSocks 所以服务大小是 20GB SSD，$3.50/mo，其他选项选填，点击"),e("strong",[s._v("Deploy Now")]),s._v("，就完成一个配置了，可在 Server 中查看配置的信息。\n"),e("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/6177162-d837b631258f48ff.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"服务列表"}}),s._v(" "),e("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/6177162-becde0684e99aabe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"服务详情"}}),s._v("\n至这里便完成了服务的购买充值并配置的准备工作。")]),s._v(" "),e("h3",{attrs:{id:"三、连接配置好的远程服务器（windows-环境）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、连接配置好的远程服务器（windows-环境）"}},[s._v("#")]),s._v(" 三、连接配置好的远程服务器（windows 环境）")]),s._v(" "),e("p",[s._v("使用 XShell 连接配置好的远程服务器，使用的参数有步骤二详情中的 IP Address，Username，Password，都可以在页面上复制\n"),e("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/6177162-7126630e94f9f7a5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"Xshell连接配置"}}),s._v("\n之后输入用户名和密码进行连接，连接成功后会进入 shell 界面，之后就可以在其中操作，进行下一步：搭建 ShadowSocks 服务。")]),s._v(" "),e("h3",{attrs:{id:"四、搭建-shadowsocks-服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四、搭建-shadowsocks-服务"}},[s._v("#")]),s._v(" 四、搭建 ShadowSocks 服务")]),s._v(" "),e("p",[s._v("在服务器上安装 shadowsocks，顺序执行下面操作")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("yum install m2crypto python-setuptools\neasy_install pip\npip install shadowsocks\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("配置 shadowsocks")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("vi  /etc/shadowsocks.json\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("写入如下配置")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('{\n    "server":"0.0.0.0", //这里写入IP Address\n    "server_port":443, //端口\n    "local_address": "127.0.0.1", //这里写入IP Address\n    "local_port":8080, //\n    "password":"123456", //客户端shadowsocks连接服务器的密码\n    "timeout":300,\n    "method":"aes-256-cfb",\n    "fast_open": false\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("配置防火墙")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("//安装防火墙\nyum install firewalld\n//启动防火墙\nsystemctl start firewalld\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("开启防火墙相应的端口")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// 端口号是你自己设置的端口\nfirewall-cmd --permanent --zone=public --add-port=443/tcp\nfirewall-cmd --reload\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("启动 Shadowsocks 服务")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// 后台运行\nssserver -c /etc/shadowsocks.json -d start\n// 调试时使用下面命令，实时查看日志\nssserver -c /etc/shadowsocks.json\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"五、本地-shadowsocks-连接服务器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#五、本地-shadowsocks-连接服务器"}},[s._v("#")]),s._v(" 五、本地 ShadowSocks 连接服务器")]),s._v(" "),e("p",[s._v("找到准备工作中下载的 ShadowSocks 安装包，解压双击 exe 文件，结合步骤四中的配置信息，进行配置\n"),e("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/6177162-3eabb0713f057fdc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"shadowsocks配置"}}),s._v("\n桌面托盘中右键 Shadowsocks"),e("strong",[s._v("启用系统代理")]),s._v("\n这个时候再试试访问外网，just enjoy it！")])])}),[],!1,null,null,null);a.default=r.exports}}]);